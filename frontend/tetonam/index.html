<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MaumCanvas</title>
    <meta
      name="description"
      content="마음캔버스 - AI 기반 심리 진단 및 상담 서비스"
    />
    <meta name="author" content="Tetonam" />

    <!-- Performance optimizations -->
    <link rel="dns-prefetch" href="//fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin />

    <!-- Preload critical fonts -->
    <link
      rel="preload"
      href="/fonts/Pretendard-Regular.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />
    <link
      rel="preload"
      href="/fonts/Pretendard-Medium.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />

    <!-- Critical font-face: define early to avoid FOUT before app CSS loads -->
    <style id="critical-fonts">
      @font-face {
        font-family: 'Pretendard';
        src: url('/fonts/Pretendard-Regular.woff2') format('woff2');
        font-weight: 400;
        font-style: normal;
        font-display: swap;
        unicode-range: U+AC00-D7AF, U+0041-005A, U+0061-007A, U+0030-0039;
      }
      @font-face {
        font-family: 'Pretendard';
        src: url('/fonts/Pretendard-Medium.woff2') format('woff2');
        font-weight: 500;
        font-style: normal;
        font-display: swap;
        unicode-range: U+AC00-D7AF, U+0041-005A, U+0061-007A, U+0030-0039;
      }
      @font-face {
        font-family: 'Pretendard';
        src: url('/fonts/Pretendard-Bold.woff2') format('woff2');
        font-weight: 700;
        font-style: normal;
        font-display: swap;
        unicode-range: U+AC00-D7AF, U+0041-005A, U+0061-007A, U+0030-0039;
      }
      /* Metric-overridden fallback to match Pretendard more closely */
      @font-face {
        font-family: 'Pretendard Fallback';
        src:
          local('Noto Sans KR'), local('Malgun Gothic'), local('Segoe UI'),
          local('Arial');
        /* Initial calibrated values to reduce small->large jump; refine if needed */
        size-adjust: 102%;
        ascent-override: 88%;
        descent-override: 12%;
        line-gap-override: 0%;
        font-weight: 400 700;
        font-style: normal;
      }
      /* Optional: reduce synthetic font adjustments to avoid reflow differences */
      html {
        font-synthesis-weight: none;
        font-synthesis-style: none;
      }
    </style>

    <!-- Global CSS early load to reduce FOUC -->
    <link rel="stylesheet" href="/src/index.css" />

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/MaumCanvasLogo.png" />
    <link rel="apple-touch-icon" href="/MaumCanvasLogo.png" />

    <!-- Mobile Web App -->
    <meta name="theme-color" content="#10b981" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="MaumCanvas" />
    <!-- Open Graph -->
    <meta property="og:title" content="마음캔버스 - MaumCanvas" />
    <meta
      property="og:description"
      content="AI 기반 심리 진단 및 상담 서비스"
    />
    <meta property="og:type" content="website" />
    <meta property="og:locale" content="ko_KR" />
    <!-- <meta property="og:image" content="https://i13e108.p.ssafy.io/" /> -->
  </head>

  <body class="font-loading">
    <div id="root"></div>
    <script>
      // When all fonts are ready, remove loading state for smoother swap.
      (function () {
        try {
          if (document.fonts && document.fonts.ready) {
            document.fonts.ready.then(function () {
              document.body.classList.remove('font-loading');
              document.body.classList.add('font-loaded');
            });
          } else {
            // Fallback: ensure we drop loading state quickly even without FontFaceSet
            window.addEventListener('load', function () {
              document.body.classList.remove('font-loading');
              document.body.classList.add('font-loaded');
            });
          }
        } catch (_) {}
      })();
    </script>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
